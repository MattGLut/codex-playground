{% extends "base.html" %}
{% block title %}Success{% endblock %}
{% block content %}
  <div class="success-container">
    <h1>Congrats! You signed in!</h1>
    <p>Welcome {{ username }}!</p>
    <div id="spinner" class="spinner"></div>
    <img
        id="cat-photo"
        src="{{ cat_url }}"
        alt="Random Cat"
        width="300"
        height="300"
        style="object-fit: cover; display: none;"
    />
  </div>
{% endblock %}
{% block scripts %}
<script>
  function applyDarkMode(on) {
    if (on) {
      document.body.classList.add('dark-mode');
    } else {
      document.body.classList.remove('dark-mode');
    }
  }

  const dark = localStorage.getItem('darkMode') === 'true';
  applyDarkMode(dark);

  const toggle = document.getElementById('toggle-dark');
  if (toggle) {
    toggle.addEventListener('click', () => {
      const enabled = document.body.classList.toggle('dark-mode');
      localStorage.setItem('darkMode', enabled);
    });
  }

  const img = document.getElementById('cat-photo');
  const spinner = document.getElementById('spinner');
  if (img && spinner) {
    spinner.style.display = 'block';
    img.addEventListener('load', () => {
      spinner.style.display = 'none';
      img.style.display = 'block';
    });
  }
</script>
{% endblock %}
